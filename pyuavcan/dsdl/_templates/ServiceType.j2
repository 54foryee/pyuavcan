{% extends "base.j2" %}
{%- block contents -%}
from pydsdl import ServiceType as _ServiceType_

{% for a in T.request_type.attributes if a.data_type is composite %}
import {{ a.data_type.full_namespace }}
{%- endfor %}
{%- for a in T.response_type.attributes if a.data_type is composite %}
import {{ a.data_type.full_namespace }}
{%- endfor %}


class {{ T.short_name }}_{{ T.version.major }}_{{ T.version.minor }}(_CompositeObject_):
    {{- data_schema('Request',  T.request_type)|indent }}
    {{- data_schema('Response', T.response_type)|indent }}
    _TYPE_: _ServiceType_ = _unpickle_(
        {{ T | pickle | indent(8) }}
    )
    assert isinstance(_TYPE_, _ServiceType_)
{% endblock -%}
